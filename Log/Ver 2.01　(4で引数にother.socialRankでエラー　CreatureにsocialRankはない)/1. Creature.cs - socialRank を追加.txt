using UnityEngine;

public class Creature : MonoBehaviour
{
    public float speed = 5f;
    public float energy = 100f;
    public float lifespan = 100f;
    public float hunger = 100f;
    public float sleepiness = 0f;
    public float matingDesire = 50f;
    public float socialRank = 1f;  // 社会的序列を追加

    public enum State { Idle, Moving, SeekingFood, Eating, SeekingSleep, Sleeping, Mating, Dead }
    public State currentState = State.Moving;

    private float age = 0f;
    private float actionTimer = 0f;

    void Update()
    {
        // 年齢の更新と寿命の確認
        age += Time.deltaTime;
        if (age >= lifespan)
        {
            Die();
            return;
        }

        // 行動ステートの処理
        HandleState();
    }

    // 状態ごとの行動処理
    void HandleState()
    {
        switch (currentState)
        {
            case State.Moving:
                Move();
                if (hunger <= 20) currentState = State.SeekingFood;
                else if (sleepiness >= 80) currentState = State.SeekingSleep;
                else if (matingDesire >= 80) currentState = State.Mating;
                break;

            case State.SeekingFood: SeekFood(); break;
            case State.Eating: Eat(); break;
            case State.SeekingSleep: SeekSleep(); break;
            case State.Sleeping: Sleep(); break;
            case State.Mating: Mating(); break;
            case State.Dead: Debug.Log("Creature is dead."); break;
        }
    }

    void Move() { Debug.Log("Moving..."); }
    void SeekFood() { Debug.Log("Seeking food..."); }
    void Eat() { Debug.Log("Eating..."); RestoreHunger(50f); }
    void SeekSleep() { Debug.Log("Seeking sleep..."); }
    void Sleep() { Debug.Log("Sleeping..."); RestoreSleepiness(100f); }
    void Mating() { Debug.Log("Mating..."); matingDesire = 0f; }

    void RestoreHunger(float amount) { hunger = Mathf.Min(hunger + amount, 100f); }
    void RestoreSleepiness(float amount) { sleepiness = Mathf.Max(sleepiness - amount, 0f); }

    void Die() { currentState = State.Dead; speed = 0f; Debug.Log("Creature has died."); }
}

using UnityEngine;

public class Creature : MonoBehaviour
{
    // 基本パラメータ
    public float speed = 5f;        // 移動速度
    public float energy = 100f;     // エネルギー
    public float energyConsumptionRate = 1f;  // エネルギー消費速度

    private bool isMoving = true;   // 移動中かどうか

    void Update()
    {
        // エネルギーが残っている間、移動を続ける
        if (energy > 0)
        {
            Move();
            ConsumeEnergy();
        }
        else
        {
            Stop();
        }
    }

    // 生物の移動処理
    void Move()
    {
        // 前方に移動
        transform.Translate(Vector3.forward * speed * Time.deltaTime);
    }

    // エネルギーを消費
    void ConsumeEnergy()
    {
        energy -= energyConsumptionRate * Time.deltaTime;
    }

    // エネルギーがなくなったら停止
    void Stop()
    {
        isMoving = false;
        speed = 0f;
        Debug.Log("Energy depleted. Creature stopped.");
    }

    // エネルギーを回復する関数
    public void RestoreEnergy(float amount)
    {
        energy += amount;
        if (energy > 0 && !isMoving)
        {
            Resume();
        }
    }

    // 動きを再開する処理
    void Resume()
    {
        isMoving = true;
        speed = 5f;  // 元のスピードに戻す
        Debug.Log("Energy restored. Creature resumed moving.");
    }
}

using UnityEngine;

public class Creature : MonoBehaviour
{
    // 基本パラメータ
    public float speed = 5f;        // 移動速度
    public float energy = 100f;     // エネルギー
    public float energyConsumptionRate = 1f;  // エネルギー消費速度

    private bool isMoving = true;   // 移動中かどうか

    void Start()
    {
        Debug.Log("Creature has started with energy: " + energy);
    }

    void Update()
    {
        // エネルギーが残っているか確認
        if (energy > 0)
        {
            Move();
            ConsumeEnergy();
        }
        else
        {
            Stop();
        }

        // エネルギーの残量をデバッグログに表示
        Debug.Log("Current energy: " + energy);
    }

    // 生物の移動処理 (移動をシミュレーションしてログに表示)
    void Move()
    {
        // 実際の移動は行わず、移動していることをデバッグログに表示
        Debug.Log("Creature is moving forward at speed: " + speed);
    }

    // エネルギーを消費 (消費をシミュレーションしてログに表示)
    void ConsumeEnergy()
    {
        energy -= energyConsumptionRate * Time.deltaTime;
        Debug.Log("Energy consumed. Current energy: " + energy);
    }

    // エネルギーがなくなったら停止
    void Stop()
    {
        if (isMoving)
        {
            isMoving = false;
            speed = 0f;
            Debug.Log("Energy depleted. Creature stopped.");
        }
    }

    // エネルギーを回復する関数
    public void RestoreEnergy(float amount)
    {
        energy += amount;
        Debug.Log("Energy restored. Current energy: " + energy);

        if (energy > 0 && !isMoving)
        {
            Resume();
        }
    }

    // 動きを再開する処理
    void Resume()
    {
        isMoving = true;
        speed = 5f;  // 元のスピードに戻す
        Debug.Log("Creature resumed moving with energy: " + energy);
    }
}
